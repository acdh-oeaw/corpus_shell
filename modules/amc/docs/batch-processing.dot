/* dot -oprocessing.png -Tpng processing.dot */ 
digraph create_mappings {
label="solr batch querying";
rankdir=TB;
compound=true;

/* variable */
node [shape=none];



/* functions */
node [shape=ellipse];
tests_xql;
tests_xqm;
solr2dataset_xql;
solr2csv_xql [style=dashed, color=red];
dataset2table_xsl;
amc_xsl;
	subgraph xsl {	
		rank=same;
		amc_xsl -> dataset2table_xsl [label="imports"];
	}
dataset2csv_xsl [style=dashed, color=green]; 
search;

/* data */
node [shape=box];
lemma_list;
solr_queries_xml;

overall_dataset_xml;
overall_dataset_csv;
overall_dataset_html;


	subgraph cluster_testin_results {	
		label="testing/results";
		rank=same;
		query_dataset_xml [peripheries=3];
		overall_result_html;		
	}

	subgraph cluster_solr {	
		label="solr";
		search;
	}


	subgraph requests {	
	rank=same;
		search;
		tests_xql;
		tests_xqm;
		solr_queries_xml;
	}
	
lemma_list -> solr_queries_xml;
solr_queries_xml -> tests_xql;
tests_xql -> tests_xqm;
tests_xqm -> search;
tests_xqm -> search;
tests_xql -> overall_result_html;
tests_xql -> query_dataset_xml;

query_dataset_xml -> solr2dataset_xql -> overall_dataset_xml;
query_dataset_xml -> solr2csv_xql -> overall_dataset_csv [style=dashed, label="deprecate", color=red];
overall_dataset_xml -> dataset2csv_xsl -> overall_dataset_csv [style=dashed, label="!", color=green];
overall_dataset_xml -> amc_xsl -> overall_dataset_html;


edge  [style=dashed];

/* makes the layout unnice */
/* query_dataset_xml -> overall_result_html [style=invisible]; */
}
